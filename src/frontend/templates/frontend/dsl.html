{% extends 'frontend/bootstrap.html' %}

{% load url from future %}

{% load bootstrap3 %}

{% block bootstrap3_content %}
    <div class="container dsl">
        <form action="" method="GET">
            <div class="form-group">
                <label for="postcode">Postcode *</label>
                <input type="text" class="form-control" name="postcode" placeholder="Postcode">
                <label for="housenumber">Housenumber *</label>
                <input type="text" class="form-control" name="housenumber" placeholder="Housenumber">
            </div>
            <div class="form-group">
                <label for="housenumber_add">Housenumber addition</label>
                <input type="text" class="form-control" name="housenumber_add" placeholder="Housenumber addition">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>

        {% if dsl_data %}
            <div class="dsl">
                <div class="dsl-content">

                    City: {{ dsl_data.City }} </br>
                    Postalcode: {{ dsl_data.PostalCode }} </br>
                    Street: {{ dsl_data.Street }} </br>
                    Housenumber: {{ dsl_data.HouseNumber }} {{ dsl_data.HouseNumber_add }}</br>
                    HVD: {{ dsl_data.name }} </br>
                    ISRA Specs: {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.isra_specs }} </br>
                    Length Last Distributor: {{ dsl_data.length_last_distributor }} meter</br>
                    Length MDF: {{ dsl_data.length_mdf }} meter </br>
                    Existing DSL Service ID: {% if dsl_data.existing_dsl_service_id != "None" %}<input type="text" class="copy_this" value="{{ dsl_data.existing_dsl_service_id }}"/>  <span class="copy_status"></span>{% endif %} </br></br>
                    {% for remark in dsl_data.remarks %}
                        Remark: {{ remark }} </br>
                    {% endfor %}
                    </br>
                    {% for product in dsl_data.products %}
                        {% if forloop.first %}
                            <span class="product headers">
                                Network / Technology / Expected Down / Orderable Down / Expected Up / Orderable Up</br>
                            </span>
                        {% endif %}
                        <span class="product">{{ product.network }}</span>
                        <span class="product">{{ product.technology }}</span>
                        <span class="product number">{{ product.expected_down }}</span>
                        <span class="product number">{{ product.orderable_down }}</span>
                        <span class="product number">{{ product.expected_up }}</span>
                        <span class="product number">{{ product.orderable_up }}</span>
                        </br>
                    {% endfor %}
                </div>
            </div>

            <div class="dsl">
                <div class="dsl-content">
                    <h2>v8</h2>
                    {% if dsl_data.v8.errors %}
                        {{  dsl_data.v8.errors.DescriptionNed }}
                        {% for error in dsl_data.v8.errors %}
                            {% if error.DescriptionNed %}{{ error.DescriptionNed }}{% else %}Geen beschrijving beschikbaar{% endif %} - {{ error.EnumName }} </br>
                        {% endfor %}
                    {% else %}
                        DistributionPoint: {{ dsl_data.v8.deliverable_product.DistributionPoint }} </br>
                        ExistingDslServiceId: {{ dsl_data.v8.existing_situation_copper.ExistingDslServiceId }} </br>
                        {% for item in dsl_data.v8.existing_situation_copper.copperconnection %}
                            {{ forloop.counter }} - Current_typeofconnection {{ item.current_typeofconnection }} </br>
                            {{ forloop.counter }} - Current_mdf_access_serviceid {{ item.current_mdf_access_serviceid }} </br>
                        {% endfor %}
                        Length_last_distributor: {{ dsl_data.length_last_distributor }} </br>
                        Length_mdf: {{ dsl_data.length_mdf }} </br>
                        {% for remark in dsl_data.v8.remarks %}
                            Remark(s): {{ remark.RemarkCode }} - {{ remark.RemarkTextNed }} </br>
                        {% endfor %}
                        <br/>
                        <h3>Aderparen</h3>
                        ISRA Specs: {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.isra_specs }}
                        {% for isra_spec in dsl_data.v8.existing_situation_copper.coper_connectionpointinfo %}
                            <br/>{{ isra_spec.isra_specs }}
                        {% endfor %}
                        </br>
                        Aantal aderparen: {{ dsl_data.v8.total_aderparen }}<br/></br>
                        
                        {% if dsl_data.v8.total_aderparen == 1 %}
                            AP1{{ forloop.counter }}
                                {% if dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_typeofconnection %}- {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_typeofconnection }} {% endif %}
                                {% if dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_mdf_access_serviceid %}- {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_mdf_access_serviceid }} {% endif %}
                                {% if dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_sdf_access_serviceid %}- {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_sdf_access_serviceid }} {% endif %}
                                {% if dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_phonenumber %}- {{ dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_phonenumber }} {% endif %}
                                {% if dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_mdf_access_serviceid and dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection.current_phonenumber %}
                                    (shared line)
                                {% endif %} </br>
                        {% else %}
                            {% for item in dsl_data.v8.existing_situation_copper.coper_connectionpointinfo.copperconnection %}
                                AP{{ forloop.counter }}
                                {% if item.current_typeofconnection %}- {{ item.current_typeofconnection }} {% endif %}
                                {% if item.current_mdf_access_serviceid %}- {{ item.current_mdf_access_serviceid }} {% endif %}
                                {% if item.current_sdf_access_serviceid %}- {{ item.current_sdf_access_serviceid }} {% endif %}
                                {% if item.current_phonenumber %}- {{ item.current_phonenumber }} {% endif %}
                                {% if item.current_mdf_access_serviceid and item.current_phonenumber %}
                                    (shared line)
                                {% endif %} </br>
                            {% endfor %}
                            {% for isra_spec in dsl_data.v8.existing_situation_copper.coper_connectionpointinfo %}
                                {% for item in isra_spec.copperconnection %}
                                    AP{{ forloop.counter }}
                                    {% if item.current_typeofconnection %}- {{ item.current_typeofconnection }} {% endif %}
                                    {% if item.current_mdf_access_serviceid %}- {{ item.current_mdf_access_serviceid }} {% endif %}
                                    {% if item.current_sdf_access_serviceid %}- {{ item.current_sdf_access_serviceid }} {% endif %}
                                    {% if item.current_phonenumber %}- {{ item.current_phonenumber }} {% endif %}
                                    {% if item.current_mdf_access_serviceid and item.current_phonenumber %}
                                        (shared line)
                                    {% endif %} </br>
                                {% endfor %}
                                <br/>
                            {% endfor %}
                        {% endif %}
                    {% endif %}

                </div>
            </div>
        {% endif %}
    </div>

{% endblock %}

